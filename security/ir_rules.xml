<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- قواعد LMS Enrollment -->
        <record id="rule_lms_enrollment_student" model="ir.rule">
            <field name="name">Student: See Own Enrollments</field>
            <field name="model_id" ref="model_lms_enrollment"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('student_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_student'))]"/>
        </record>
        
        <record id="rule_lms_enrollment_instructor" model="ir.rule">
            <field name="name">Instructor: See Course Enrollments</field>
            <field name="model_id" ref="model_lms_enrollment"/>
            <field name="global" eval="False"/>
            <field name="domain_force">['|', ('course_id.instructor_id', '=', user.partner_id.id), ('company_id', '=', user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_instructor'))]"/>
        </record>
        
        <record id="rule_lms_enrollment_manager" model="ir.rule">
            <field name="name">Manager: See All Enrollments</field>
            <field name="model_id" ref="model_lms_enrollment"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_lms_manager'))]"/>
        </record>
        
        <!-- قواعد LMS Content Progress -->
        <record id="rule_lms_content_progress_student" model="ir.rule">
            <field name="name">Student: See Own Progress</field>
            <field name="model_id" ref="model_lms_content_progress"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('enrollment_id.student_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_student'))]"/>
        </record>
        
        <record id="rule_lms_content_progress_instructor" model="ir.rule">
            <field name="name">Instructor: See Course Progress</field>
            <field name="model_id" ref="model_lms_content_progress"/>
            <field name="global" eval="False"/>
            <field name="domain_force">['|', ('enrollment_id.course_id.instructor_id', '=', user.partner_id.id), ('enrollment_id.company_id', '=', user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_instructor'))]"/>
        </record>
        
        <!-- قواعد LMS Course -->
        <record id="rule_lms_course_instructor" model="ir.rule">
            <field name="name">Instructor: See Own Courses</field>
            <field name="model_id" ref="model_lms_course"/>
            <field name="global" eval="False"/>
            <field name="domain_force">['|', ('instructor_id', '=', user.partner_id.id), ('published', '=', True)]</field>
            <field name="groups" eval="[(4, ref('group_lms_instructor'))]"/>
        </record>
        
        <!-- قواعد LMS Certificate -->
        <record id="rule_lms_certificate_student" model="ir.rule">
            <field name="name">Student: See Own Certificates</field>
            <field name="model_id" ref="model_lms_certificate"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('student_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_student'))]"/>
        </record>
        
        <!-- قواعد LMS Quiz Attempt -->
        <record id="rule_lms_quiz_attempt_student" model="ir.rule">
            <field name="name">Student: See Own Quiz Attempts</field>
            <field name="model_id" ref="model_lms_quiz_attempt"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('student_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_student'))]"/>
        </record>
        
        <record id="rule_lms_quiz_attempt_instructor" model="ir.rule">
            <field name="name">Instructor: See Course Quiz Attempts</field>
            <field name="model_id" ref="model_lms_quiz_attempt"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('quiz_id.course_id.instructor_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_instructor'))]"/>
        </record>
        
        <!-- قواعد LMS Live Session -->
        <record id="rule_lms_live_session_student" model="ir.rule">
            <field name="name">Student: See Available Sessions</field>
            <field name="model_id" ref="model_lms_live_session"/>
            <field name="global" eval="False"/>
            <field name="domain_force">
                ['|',
                 ('enrolled_students', 'in', [user.partner_id.id]),
                 ('require_registration', '=', False)]
            </field>
            <field name="groups" eval="[(4, ref('group_lms_student'))]"/>
        </record>
        
        <record id="rule_lms_live_session_instructor" model="ir.rule">
            <field name="name">Instructor: See Own Sessions</field>
            <field name="model_id" ref="model_lms_live_session"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('instructor_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_instructor'))]"/>
        </record>
        
        <!-- قواعد LMS Achievement -->
        <record id="rule_lms_achievement_student" model="ir.rule">
            <field name="name">Student: See Own Achievements</field>
            <field name="model_id" ref="model_lms_achievement"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('student_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_student'))]"/>
        </record>
        
        <!-- قواعد LMS Payout -->
        <record id="rule_lms_payout_instructor" model="ir.rule">
            <field name="name">Instructor: See Own Payouts</field>
            <field name="model_id" ref="model_lms_payout"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('instructor_id.partner_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_instructor'))]"/>
        </record>
        
        <!-- قواعد Corporate Enrollment -->
        <record id="rule_lms_corporate_enrollment" model="ir.rule">
            <field name="name">Corporate: See Company Enrollments</field>
            <field name="model_id" ref="model_lms_enrollment"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('company_id', '=', user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('hr.group_hr_manager'))]"/>
        </record>
        
        <!-- قواعد Compliance Rules -->
        <record id="rule_lms_compliance_rule_manager" model="ir.rule">
            <field name="name">Manager: See Company Compliance Rules</field>
            <field name="model_id" ref="model_lms_compliance_rule"/>
            <field name="global" eval="False"/>
            <field name="domain_force">[('company_id', '=', user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_lms_manager'))]"/>
        </record>
        
    </data>
</odoo>